### JWT (Json Web Token)

- 데이터가 JSON으로 이루어져 있는 토큰
- 두 개체가 서로 안전하게 정보를 주고받을 수 있도록 웹 표준으로 정의된 기술
    
    

### 세션 기반 인증 vs 토큰 기반 인증

- 세션 기반 인증 시스템
    - 서버가 사용자가 로그인 중임을 기억하고 있다는 뜻
    - 과정
        
        사용자의 로그인
        
        → 서버는 세션 저장소에 사용자의 정보 조회 & 세션 id 발급
        
        ( 발급된 id는 주로 브라우저의 쿠키에 저장)
        
        → 사용자의 다른 요청
        
        → 서버는 세션 저장소에서 세션 조회 후 로그인 여부를 결정하여 작업 처리, 응답
        
    - 세션 저장소는 주로 메모리, 디스크, 데이터베이스 등을 사용
    - 단점
        - 서버를 확장하기 번거로움
            - 서버의 인스턴스가 여러 개라면, 모든 서버끼리 같은 세션을 공유해야 하므로 세션 전용 DB를 만들어야 함
- 토큰 기반 인증 시스템
    - 토큰
        - 로그인 이후 서버가 만들어주는 문자열
        - 해당 문자열 안에는 사용자의 로그인 정보가 들어 있고, 해당 정보가 서버에서 발급되었음을 증명하는 서명이 들어 있음
        - 서명 데이터는 해싱 알고리즘을 통해 만들어짐
            - 주로 HMAC SHA256 혹은 RSA SHA256 알고리즘이 사용됨
    - 서버에서 만들어 준 토큰은 서명이 있기 때문에 무결성이 보장됨
        - 무결성이란, 정보가 변경되거나 위조되지 않았음을 의미하는 성질
    - 과정
        
        사용자의 로그인
        
        → 서버에서 사용자에게 해당 사용자의 정보를 지니고 있는 토큰 발급
        
        → 추후 사용자가 다른 API 요청 시 발급받은 토큰과 함께 요청함
        
        → 서버는 해당 토큰의 유효성 검사, 결과에 따라 작업을 처리, 응답
        
    - 장점
        - 서버에서 사용자 로그인 정보를 기억하기 위해 사용하는 리소스가 적음
        - 사용자 쪽에서 로그인 상태를 지닌 토큰을 가지고 있으므로 서버의 확장성 높음
        - 서버의 인스턴스가 여러 개라도 서버끼리 사용자의 로그인 상태를 공유하고 있을 필요가 없음